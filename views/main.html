<md-content layout="column" ng-cloak>
  <form name="httpForm" novalidate ng-submit="httpForm.$valid && getPdf(pdfUrl)" layout layout-padding layout-align="start center">
    <md-input-container flex>
      <label>PDF URL</label>
      <input required name="pdfUrl" ng-model="pdfUrl" ng-pattern="/^(http:\/\/|https:\/\/)?.+\.pdf$/">
      <div ng-messages="httpForm.pdfUrl.$error">
        <div ng-message="required">Url is required.</div>
        <div ng-message="pattern">The url must be of a valid pdf file.</div>
      </div>
    </md-input-container>

    <md-button type="submit" class="md-raised md-primary">Get PDF</md-button>
  </form>

  <md-subheader class="md-primary" layout="column" flex>
    <span ng-show="status">{{ status }}</span>
    <md-progress-linear ng-show="status && !pdfContent" flex md-mode="query"></md-progress-linear>
  </md-subheader>

  <md-content md-whiteframe="21" flex layout layout-padding ng-show="pdfContent" paste-directive>
    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="right">
      <md-toolbar class="md-theme-light">
        <h1 class="md-toolbar-tools">Details:</h1>
      </md-toolbar>

      <form layout="column">
        <md-input-container ng-oninit="inputText = ''">
          <label>Paste Value</label>
          <textarea type="text" md-no-autogrow md-no-resize md-select-on-focus md-max-rows="1" ng-model="inputText" ng-paste='handlePaste($event)'></textarea>
        </md-input-container>
        <div layout layout-align="end center">
          <md-button class="md-primary md-raised" ng-disabled="!details" ng-click="save(details)">Save</md-button>
        </div>
      </form>
      <md-divider></md-divider>
      <md-list class="md-dense" flex>
        <md-list-item flex ng-repeat="(key, value) in details">
          <p class="md-caption">{{ key | uppercase }}: {{ value }}</p>
          <md-icon aria-label="edit" class="material-icons md-secondary" ng-class="(value == '') ? 'md-warn' : 'md-primary'" ng-click="edit(key, value, $event)">edit</md-icon>
        </md-list-item>
      </md-list>
    </md-sidenav>

    <object data="{{ pdfContent }}" type="application/pdf" style="width: 100%; height: 100%;"></object>
    <md-button class="md-fab md-mini md-primary" ng-mouseover="openSidenav()">
      <md-icon aria-label="open" class="material-icons">swap_horiz</md-icon>
    </md-button>
  </md-content>
</md-content>
